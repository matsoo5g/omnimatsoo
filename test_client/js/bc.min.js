function prepareStatPayloadFromQueryParameters(){source={1:window.location.origin,2:"https://matsoo5gclient.s3.amazonaws.com",3:"https://d3ovjicgaozkeh.cloudfront.net"},vid={1:"/vid/short.mp4",2:"/vid/bitmovin_6M_137s_hd.mp4",3:"/vid/Dunkerque_2M_276s_fhd.mp4",4:"/vid/Klyuchevskoy_10M_147s_4k.mp4",5:"/vid/Monkeys_28M_20s_4k.mp4",6:"/vid/Dam_50M_24s_4k.mp4"};const e=Object.fromEntries(new URLSearchParams(window.location.search).entries());let t=source[e.s||1];return"so"in e&&(t=e.so),{videoRoot:t+(vid[e.v||1]||vid[1]),deviceTag:e.dtag||"unknown_device",postBackend:e.post||"http://localhost:5000/collect/"}}const MediaEvents=["abort","canplay","canplaythrough","durationchange","complete","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","ratechange","suspend","seeked","seeking","stalled","volumechange","waiting"];async function postData(e="",t={}){await fetch(e,{method:"POST",mode:"no-cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}window.addEventListener("DOMContentLoaded",()=>{video=document.querySelector("#video"),qpvars=prepareStatPayloadFromQueryParameters(),video.setAttribute("src",qpvars.videoRoot);let e=[],t={samples:0,creationTimes:[],droppedVideoFrames:[],totalVideoFrames:[]};MediaEvents.forEach(t=>{video.addEventListener(t,t=>{e.push([performance.now(),t.type])})}),video.addEventListener("ended",()=>{t.samples=t.creationTimes.length,postData(qpvars.postBackend,{id:Math.floor(performance.now()%65536).toString(16)+Math.floor(16777216*(1+Math.random())).toString(16).substring(1),timestamp:Date.now(),target:video.src,duration:video.duration,events:e,device_tag:qpvars.deviceTag,playbackquality:t})}),video.play()});